<script>

  class Param {
    constructor(name,defaultValue, min, max, valueType, typeOfController) {
      return {
        name: name,
        defaultValue: defaultValue,
        currentValue: defaultValue,
        range: {
          min: min,
          max: max,
        },
        valueType: valueType,
        typeOfController: typeOfController
      }
    }
  }

  class EffectLib extends GainNode {
    constructor(ctx) {
      super(ctx);
      let name, version, author, documentationUrl, thumbnailURL, textDescription;
      let inputs = [];
      let outputs = [];
      let params = [];
    }


    getDescription() {
      return {
        name: {
          value: this.name
        },
        version: {
          value: this.version
        },
        author: {
          value: this.author
        },
        documentationUrl: {
          value: this.documentationUrl
        },
        thumbnailURL: {
          value: this.thumbnailURL
        },
        textDescription: {
          value: this.textDescription
        }
      };
    }

    getInputs() {
      return this.inputs;
    }

    getOutputs() {
      return this.outputs;
    }

    getParams() {
      return this.params;
    }

    getParam(paramName) {
      return this.params[params.indexOf(paramName)];
    }

    setParam(paramName,attribute, value) {
      this.params[params.indexOf(paramName)].attribute = value;
    }
    getCurrentState() {
      for (param in params) {
        return (param.name + " : " + param.currentValue);
      }
    }

  }

  class PongPingDelay extends EffectLib{
    constructor(ctx){
      super(ctx);
      this.name = "PingPongDelay";
      this.version = 1.1;
      this.author = "Guillaume Etevenard";
      this.documentationUrl = ".";
      this.thumbnailURL = ".";
      this.textDescription = "Stereo Delay with mix, time and feedback controls";
      this.mix = new Param("mix",0.5,0,1,"linear","knobs");
      this.feedback = new Param("feedback",0.5,0,1,"linear","knobs");
      this.time = new Param("time",0.5,0,1,"linear","knobs");
      super.params.push(mix,feedback,time);

      //TODO: le graphe

    }



  

  }



</script>